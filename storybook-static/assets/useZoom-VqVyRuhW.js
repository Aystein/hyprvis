import{r}from"./index-BBkUAzwr.js";import{u as E}from"./useControlledUncontrolled-BegJw1Lv.js";const M=0,X=1,Y=2,o=40,x=800;function L(e){let t=0,l=0,n=0,a=0;switch(n=e.deltaX,a=e.deltaY,e.deltaMode){case M:break;case X:n*=o,a*=o;break;case Y:n*=x,a*=x;break}return n&&!t&&(t=n<1?-1:1),a&&!l&&(l=a<1?-1:1),{spinX:t,spinY:l,pixelX:n,pixelY:a,x:e.clientX,y:e.clientY}}function _(e,t){const l=r.useRef(t);l.current=t,r.useEffect(()=>{const n=e.current;if(!n)return;const a=c=>{c.preventDefault();const u=n.getBoundingClientRect();l.current({...L(c),x:c.clientX-u.left,y:c.clientY-u.top})};return n.addEventListener("wheel",a,{passive:!1}),()=>{n.removeEventListener("wheel",a)}},[e])}function f(e,t){return(t-e.x)/e.k}function d(e,t){return(t-e.y)/e.k}function p(e,t,l){return{x:e.x+t*e.k,y:e.y+l*e.k,k:e.k}}function w(e,t,l){const n=f(e,0),a=f(e,t)-t,c=d(e,0),u=d(e,l)-l;return p(e,a>n?(n+a)/2:Math.min(0,n)||Math.max(0,a),u>c?(c+u)/2:Math.min(0,c)||Math.max(0,u))}function D(e,t,l,n){const a=Math.exp(n*.1),c=Math.max(1,a*e.k),u=(t-e.x)/e.k,h=(l-e.y)/e.k,k=-(u*(c-e.k)),y=-(h*(c-e.k)),i=e.x+k,s=e.y+y;return{k:c,x:Math.abs(i)>.1?i:0,y:Math.abs(s)>.1?s:0}}function C(e,t={}){const[l,n]=E({value:t.value,defaultValue:t.defaultValue||{x:0,y:0,k:1},onChange:t.onChange});return _(e,a=>{let c=D(l,a.x,a.y,-a.spinY);if(t.constraint)c=t.constraint(c);else{const u=e.current.getBoundingClientRect();c=w(c,u.width,u.height)}t.direction==="x"&&(c.y=l.y),t.direction==="y"&&(c.x=l.x),n(c)}),{value:l,setValue:n}}export{f as i,C as u};

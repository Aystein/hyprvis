import{j as n}from"./jsx-runtime-DRTy3Uxn.js";import{r as p}from"./index-BBkUAzwr.js";import{u as q}from"./useInteractions-I9HJ-Vea.js";import{c as a}from"./util-co6UzHBn.js";const r=6,y="transparent",x=8,g=1;function D({parent:h,brush:e,direction:l="both",onChange:m}){const u=p.useRef(void 0),t=p.useId(),d=p.useRef({onChange:m});return d.current={onChange:m},q(u,{onClick:()=>{var i,s;(s=(i=d.current).onChange)==null||s.call(i,void 0)},onDrag:i=>{var R,z;const s=h.current.getBoundingClientRect(),c={x:i.clientX-s.left,y:i.clientY-s.top},o={...e};switch(i.target.id){case t:{const I=e.x2-e.x1,H=e.y2-e.y1;o.x1=a(c.x-i.anchor.x,0,s.width-I),o.y1=a(c.y-i.anchor.y,0,s.height-H),o.x2=o.x1+e.x2-e.x1,o.y2=o.y1+e.y2-e.y1;break}case`${t}-west`:o.x1=a(c.x,0,e.x2-x);break;case`${t}-ost`:o.x2=a(c.x,e.x1+x,s.width);break;case`${t}-north`:o.y1=a(c.y,0,e.y2-x);break;case`${t}-south`:o.y2=a(c.y,e.y1+x,s.height);break;case`${t}-northwest`:o.x1=a(c.x,0,e.x2-x),o.y1=a(c.y,0,e.y2-x);break;case`${t}-northeast`:o.x2=a(c.x,e.x1+x,s.width),o.y1=a(c.y,0,e.y2-x);break;case`${t}-southwest`:o.x1=a(c.x,0,e.x2-x),o.y2=a(c.y,e.y1+x,s.height);break;case`${t}-southeast`:o.x2=a(c.x,e.x1+x,s.width),o.y2=a(c.y,e.y1+x,s.height);break}(o.x1!==e.x1||o.x2!==e.x2||o.y1!==e.y1||o.y2!==e.y2)&&((z=(R=d.current).onChange)==null||z.call(R,o))}}),n.jsxs("g",{ref:u,children:[n.jsx("rect",{id:t,x:e.x1+g,y:e.y1+g,width:e.x2-e.x1-g*2,height:e.y2-e.y1-g*2,stroke:"#24292e",fill:"#24292e",fillOpacity:.1,strokeDasharray:3,cursor:"move"}),l!=="horizontal"?n.jsxs(n.Fragment,{children:[n.jsx("rect",{id:`${t}-south`,x:e.x1,y:e.y2-r/2,width:e.x2-e.x1,height:r,fill:y,cursor:"ns-resize"}),n.jsx("rect",{id:`${t}-north`,x:e.x1,y:e.y1-r/2,width:e.x2-e.x1,height:r,fill:y,cursor:"ns-resize"})]}):null,l!=="vertical"?n.jsxs(n.Fragment,{children:[n.jsx("rect",{id:`${t}-west`,x:e.x1-r/2,y:e.y1,width:r,height:e.y2-e.y1,fill:y,cursor:"ew-resize"}),n.jsx("rect",{id:`${t}-ost`,x:e.x2-r/2,y:e.y1,width:r,height:e.y2-e.y1,fill:y,cursor:"ew-resize"})]}):null,l==="both"?n.jsxs(n.Fragment,{children:[n.jsx("rect",{id:`${t}-northwest`,x:e.x1-r/2,y:e.y1-r/2,width:r,height:r,cursor:"nwse-resize",fill:y}),n.jsx("rect",{id:`${t}-northeast`,x:e.x2-r/2,y:e.y1-r/2,width:r,height:r,cursor:"nesw-resize",fill:y}),n.jsx("rect",{id:`${t}-southwest`,x:e.x1-r/2,y:e.y2-r/2,width:r,height:r,cursor:"nesw-resize",fill:y}),n.jsx("rect",{id:`${t}-southeast`,x:e.x2-r/2,y:e.y2-r/2,width:r,height:r,cursor:"nwse-resize",fill:y})]}):null]})}D.__docgenInfo={description:"Brush with draggable borders",methods:[],displayName:"BrushRect",props:{brush:{required:!0,tsType:{name:"Brush"},description:""},direction:{required:!1,tsType:{name:"union",raw:'"horizontal" | "vertical" | "both"',elements:[{name:"literal",value:'"horizontal"'},{name:"literal",value:'"vertical"'},{name:"literal",value:'"both"'}]},description:"",defaultValue:{value:"'both'",computed:!1}},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(brush: { x1: number, y1: number, x2: number, y2: number }) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ x1: number, y1: number, x2: number, y2: number }",signature:{properties:[{key:"x1",value:{name:"number",required:!0}},{key:"y1",value:{name:"number",required:!0}},{key:"x2",value:{name:"number",required:!0}},{key:"y2",value:{name:"number",required:!0}}]}},name:"brush"}],return:{name:"void"}}},description:""},parent:{required:!0,tsType:{name:"ReactRefObject",raw:"React.RefObject<SVGSVGElement>",elements:[{name:"SVGSVGElement"}]},description:""}}};function T(h,e,l={}){const[m,u]=p.useState();return q(h,{onDrag:t=>{var s;const d=h.current.getBoundingClientRect(),i={x1:Math.min(t.anchor.x,t.end.x),y1:Math.min(t.anchor.y,t.end.y),x2:Math.max(t.anchor.x,t.end.x),y2:Math.max(t.anchor.y,t.end.y)};l.direction==="horizontal"?(i.y1=0,i.y2=d.height):l.direction==="vertical"&&(i.x1=0,i.x2=d.width),i.x1=a(i.x1,0,d.width),i.y1=a(i.y1,0,d.height),i.x2=a(i.x2,0,d.width),i.y2=a(i.y2,0,d.height),u(i),(s=e.onBrush)==null||s.call(e,i)}}),{brush:m,setBrush:u}}const L={};function j({direction:h}){const e=p.useRef(null),{brush:l,setBrush:m}=T(e,{},{direction:h});return n.jsx(n.Fragment,{children:n.jsx("div",{style:{position:"relative",width:300,height:300,border:"1px dashed black"},children:n.jsx("svg",{ref:e,style:{position:"absolute",width:"100%",height:"100%"},children:l?n.jsx(D,{parent:e,direction:h,onChange:u=>{m(u)},brush:l}):null})})})}const w={name:"Horizontal Brush",render:()=>n.jsx(j,{direction:"horizontal"})},f={name:"Vertical Brush",render:()=>n.jsx(j,{direction:"vertical"})},B={name:"Both Brush",render:()=>n.jsx(j,{direction:"both"})};var $,k,S;w.parameters={...w.parameters,docs:{...($=w.parameters)==null?void 0:$.docs,source:{originalSource:`{
  name: "Horizontal Brush",
  render: () => <BrushStory direction='horizontal' />
}`,...(S=(k=w.parameters)==null?void 0:k.docs)==null?void 0:S.source}}};var v,E,O;f.parameters={...f.parameters,docs:{...(v=f.parameters)==null?void 0:v.docs,source:{originalSource:`{
  name: "Vertical Brush",
  render: () => <BrushStory direction='vertical' />
}`,...(O=(E=f.parameters)==null?void 0:E.docs)==null?void 0:O.source}}};var C,V,_;B.parameters={...B.parameters,docs:{...(C=B.parameters)==null?void 0:C.docs,source:{originalSource:`{
  name: "Both Brush",
  render: () => <BrushStory direction='both' />
}`,...(_=(V=B.parameters)==null?void 0:V.docs)==null?void 0:_.source}}};const P=["HorizontalBrush","VerticalBrush","BothBrush"];export{B as BothBrush,w as HorizontalBrush,f as VerticalBrush,P as __namedExportsOrder,L as default};

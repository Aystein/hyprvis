import{j as o}from"./jsx-runtime-DRTy3Uxn.js";import{useMDXComponents as te}from"./index-z5U8iC57.js";import{r as O}from"./index-BBkUAzwr.js";import{B as le}from"./Brushable-C-Nt9MTs.js";import{C as de}from"./Center-DuSRiu9E.js";import{u as he}from"./useInteractions-fLLa9C_C.js";import{c as q}from"./util-co6UzHBn.js";import{u as _e}from"./useControlledUncontrolled-BegJw1Lv.js";import"./index-D-wQxM75.js";import"./iframe-D5Mjo1FJ.js";import"../sb-preview/runtime.js";import"./index-PqR-_bA4.js";import"./index-Dkj0J1ds.js";import"./index-DrlA5mbP.js";import"./index-DrFu-skq.js";var ne=Symbol.for("immer-nothing"),J=Symbol.for("immer-draftable"),f=Symbol.for("immer-state");function d(e,...r){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var m=Object.getPrototypeOf;function p(e){return!!e&&!!e[f]}function _(e){var r;return e?ie(e)||Array.isArray(e)||!!e[J]||!!((r=e.constructor)!=null&&r[J])||S(e)||v(e):!1}var ye=Object.prototype.constructor.toString();function ie(e){if(!e||typeof e!="object")return!1;const r=m(e);if(r===null)return!0;const t=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return t===Object?!0:typeof t=="function"&&Function.toString.call(t)===ye}function C(e,r){z(e)===0?Reflect.ownKeys(e).forEach(t=>{r(t,e[t],e)}):e.forEach((t,n)=>r(n,t,e))}function z(e){const r=e[f];return r?r.type_:Array.isArray(e)?1:S(e)?2:v(e)?3:0}function E(e,r){return z(e)===2?e.has(r):Object.prototype.hasOwnProperty.call(e,r)}function oe(e,r,t){const n=z(e);n===2?e.set(r,t):n===3?e.add(t):e[r]=t}function me(e,r){return e===r?e!==0||1/e===1/r:e!==e&&r!==r}function S(e){return e instanceof Map}function v(e){return e instanceof Set}function h(e){return e.copy_||e.base_}function R(e,r){if(S(e))return new Map(e);if(v(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);if(!r&&ie(e))return m(e)?{...e}:Object.assign(Object.create(null),e);const t=Object.getOwnPropertyDescriptors(e);delete t[f];let n=Reflect.ownKeys(t);for(let i=0;i<n.length;i++){const s=n[i],c=t[s];c.writable===!1&&(c.writable=!0,c.configurable=!0),(c.get||c.set)&&(t[s]={configurable:!0,writable:!0,enumerable:c.enumerable,value:e[s]})}return Object.create(m(e),t)}function L(e,r=!1){return F(e)||p(e)||!_(e)||(z(e)>1&&(e.set=e.add=e.clear=e.delete=pe),Object.freeze(e),r&&Object.entries(e).forEach(([t,n])=>L(n,!0))),e}function pe(){d(2)}function F(e){return Object.isFrozen(e)}var ge={};function y(e){const r=ge[e];return r||d(0,e),r}var x;function se(){return x}function xe(e,r){return{drafts_:[],parent_:e,immer_:r,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Q(e,r){r&&(y("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=r)}function M(e){N(e),e.drafts_.forEach(Pe),e.drafts_=null}function N(e){e===x&&(x=e.parent_)}function Z(e){return x=xe(x,e)}function Pe(e){const r=e[f];r.type_===0||r.type_===1?r.revoke_():r.revoked_=!0}function V(e,r){r.unfinalizedDrafts_=r.drafts_.length;const t=r.drafts_[0];return e!==void 0&&e!==t?(t[f].modified_&&(M(r),d(4)),_(e)&&(e=b(r,e),r.parent_||D(r,e)),r.patches_&&y("Patches").generateReplacementPatches_(t[f].base_,e,r.patches_,r.inversePatches_)):e=b(r,t,[]),M(r),r.patches_&&r.patchListener_(r.patches_,r.inversePatches_),e!==ne?e:void 0}function b(e,r,t){if(F(r))return r;const n=r[f];if(!n)return C(r,(i,s)=>ee(e,n,r,i,s,t)),r;if(n.scope_!==e)return r;if(!n.modified_)return D(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const i=n.copy_;let s=i,c=!1;n.type_===3&&(s=new Set(i),i.clear(),c=!0),C(s,(a,u)=>ee(e,n,i,a,u,t,c)),D(e,i,!1),t&&e.patches_&&y("Patches").generatePatches_(n,t,e.patches_,e.inversePatches_)}return n.copy_}function ee(e,r,t,n,i,s,c){if(p(i)){const a=s&&r&&r.type_!==3&&!E(r.assigned_,n)?s.concat(n):void 0,u=b(e,i,a);if(oe(t,n,u),p(u))e.canAutoFreeze_=!1;else return}else c&&t.add(i);if(_(i)&&!F(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;b(e,i),(!r||!r.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(t,n)&&D(e,i)}}function D(e,r,t=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&L(r,t)}function we(e,r){const t=Array.isArray(e),n={type_:t?1:0,scope_:r?r.scope_:se(),modified_:!1,finalized_:!1,assigned_:{},parent_:r,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=n,s=B;t&&(i=[n],s=P);const{revoke:c,proxy:a}=Proxy.revocable(i,s);return n.draft_=a,n.revoke_=c,a}var B={get(e,r){if(r===f)return e;const t=h(e);if(!E(t,r))return je(e,t,r);const n=t[r];return e.finalized_||!_(n)?n:n===k(e.base_,r)?(A(e),e.copy_[r]=I(n,e)):n},has(e,r){return r in h(e)},ownKeys(e){return Reflect.ownKeys(h(e))},set(e,r,t){const n=ce(h(e),r);if(n!=null&&n.set)return n.set.call(e.draft_,t),!0;if(!e.modified_){const i=k(h(e),r),s=i==null?void 0:i[f];if(s&&s.base_===t)return e.copy_[r]=t,e.assigned_[r]=!1,!0;if(me(t,i)&&(t!==void 0||E(e.base_,r)))return!0;A(e),T(e)}return e.copy_[r]===t&&(t!==void 0||r in e.copy_)||Number.isNaN(t)&&Number.isNaN(e.copy_[r])||(e.copy_[r]=t,e.assigned_[r]=!0),!0},deleteProperty(e,r){return k(e.base_,r)!==void 0||r in e.base_?(e.assigned_[r]=!1,A(e),T(e)):delete e.assigned_[r],e.copy_&&delete e.copy_[r],!0},getOwnPropertyDescriptor(e,r){const t=h(e),n=Reflect.getOwnPropertyDescriptor(t,r);return n&&{writable:!0,configurable:e.type_!==1||r!=="length",enumerable:n.enumerable,value:t[r]}},defineProperty(){d(11)},getPrototypeOf(e){return m(e.base_)},setPrototypeOf(){d(12)}},P={};C(B,(e,r)=>{P[e]=function(){return arguments[0]=arguments[0][0],r.apply(this,arguments)}});P.deleteProperty=function(e,r){return P.set.call(this,e,r,void 0)};P.set=function(e,r,t){return B.set.call(this,e[0],r,t,e[0])};function k(e,r){const t=e[f];return(t?h(t):e)[r]}function je(e,r,t){var i;const n=ce(r,t);return n?"value"in n?n.value:(i=n.get)==null?void 0:i.call(e.draft_):void 0}function ce(e,r){if(!(r in e))return;let t=m(e);for(;t;){const n=Object.getOwnPropertyDescriptor(t,r);if(n)return n;t=m(t)}}function T(e){e.modified_||(e.modified_=!0,e.parent_&&T(e.parent_))}function A(e){e.copy_||(e.copy_=R(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Ce=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(r,t,n)=>{if(typeof r=="function"&&typeof t!="function"){const s=t;t=r;const c=this;return function(u=s,...w){return c.produce(u,j=>t.call(this,j,...w))}}typeof t!="function"&&d(6),n!==void 0&&typeof n!="function"&&d(7);let i;if(_(r)){const s=Z(this),c=I(r,void 0);let a=!0;try{i=t(c),a=!1}finally{a?M(s):N(s)}return Q(s,n),V(i,s)}else if(!r||typeof r!="object"){if(i=t(r),i===void 0&&(i=r),i===ne&&(i=void 0),this.autoFreeze_&&L(i,!0),n){const s=[],c=[];y("Patches").generateReplacementPatches_(r,i,s,c),n(s,c)}return i}else d(1,r)},this.produceWithPatches=(r,t)=>{if(typeof r=="function")return(c,...a)=>this.produceWithPatches(c,u=>r(u,...a));let n,i;return[this.produce(r,t,(c,a)=>{n=c,i=a}),n,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){_(e)||d(8),p(e)&&(e=be(e));const r=Z(this),t=I(e,void 0);return t[f].isManual_=!0,N(r),t}finishDraft(e,r){const t=e&&e[f];(!t||!t.isManual_)&&d(9);const{scope_:n}=t;return Q(n,r),V(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,r){let t;for(t=r.length-1;t>=0;t--){const i=r[t];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}t>-1&&(r=r.slice(t+1));const n=y("Patches").applyPatches_;return p(e)?n(e,r):this.produce(e,i=>n(i,r))}};function I(e,r){const t=S(e)?y("MapSet").proxyMap_(e,r):v(e)?y("MapSet").proxySet_(e,r):we(e,r);return(r?r.scope_:se()).drafts_.push(t),t}function be(e){return p(e)||d(10,e),ae(e)}function ae(e){if(!_(e)||F(e))return e;const r=e[f];let t;if(r){if(!r.modified_)return r.base_;r.finalized_=!0,t=R(e,r.scope_.immer_.useStrictShallowCopy_)}else t=R(e,!0);return C(t,(n,i)=>{oe(t,n,ae(i))}),r&&(r.finalized_=!1),t}var l=new Ce,De=l.produce;l.produceWithPatches.bind(l);l.setAutoFreeze.bind(l);l.setUseStrictShallowCopy.bind(l);l.applyPatches.bind(l);l.createDraft.bind(l);l.finishDraft.bind(l);function ze(e){return e.map((r,t)=>t===0?`M ${r.x} ${r.y}`:`L ${r.x} ${r.y}`).join(" ")}function Se(e,r={}){const t=O.useRef(),{value:n,onChange:i}=r,[s,c]=_e({value:n,onChange:i}),a=O.useRef(r);return a.current=r,he(e,{onDrag:u=>{var j,U,W,X,$,K,G,H;const w=e.current.getBoundingClientRect();if(u.isFirstDrag){const g=[u.start,u.end];c(g),t.current=u.end,(U=(j=a.current).onChange)==null||U.call(j,g)}else if(Math.abs(u.end.x-t.current.x)+Math.abs(u.end.y-t.current.y)>(r.minDistanceToCreatePoint??6)){const g={x:q(u.end.x,1,w.width-1),y:q(u.end.y,1,w.height-1)},Y=De(s,fe=>{fe.push(g)});c(Y),t.current=g,(X=(W=a.current).onChange)==null||X.call(W,Y)}u.isLastDrag&&((K=($=a.current).onChangeEnd)==null||K.call($,s),c(void 0),t.current=void 0,(H=(G=a.current).onChange)==null||H.call(G,void 0))}}),{value:s,setValue:c}}function ue(){const e=O.useRef(),{value:r}=Se(e);return o.jsx(de,{children:o.jsx(le,{ref:e,children:r?o.jsx("path",{d:ze(r),fill:"none",stroke:"black",strokeDasharray:"4",strokeWidth:2}):null})})}ue.__docgenInfo={description:"",methods:[],displayName:"LassoUsage"};function re(e){const r={code:"code",h3:"h3",h4:"h4",p:"p",pre:"pre",...te(),...e.components};return o.jsxs(o.Fragment,{children:[o.jsx(r.h3,{id:"demo",children:"Demo"}),`
`,o.jsx(ue,{}),`
`,o.jsx(r.h3,{id:"usage",children:"Usage"}),`
`,o.jsx(r.pre,{children:o.jsx(r.code,{className:"language-tsx",children:`import { useRef } from "react";
import { Brushable } from "../Brushable";
import { Center } from "../Center";
import { lassoToSvgPath, useLasso } from "hyprvis";

export function Demo1() {
    const ref = useRef();

    const { lasso } = useLasso(ref);

    return <Center>
        <Brushable ref={ref}>
            { lasso ? <path d={lassoToSvgPath(lasso)} fill="none"
            stroke="black" strokeDasharray="4" strokeWidth={2} /> : null }
        </Brushable>
    </Center>
}
`})}),`
`,o.jsx(r.h3,{id:"api",children:"API"}),`
`,o.jsx(r.h4,{id:"value",children:o.jsx(r.code,{children:"value"})}),`
`,o.jsx(r.pre,{children:o.jsx(r.code,{className:"language-ts",children:`value?: LassoValue
`})}),`
`,o.jsxs(r.p,{children:["Optional value that can be used to control the ",o.jsx(r.code,{children:"useLasso"})," hook in conjunction with ",o.jsx(r.code,{children:"onChange"}),"."]}),`
`,o.jsx(r.h4,{id:"onchange",children:o.jsx(r.code,{children:"onChange"})}),`
`,o.jsx(r.pre,{children:o.jsx(r.code,{className:"language-ts",children:`onChange?: (value: LassoValue) => void
`})}),`
`,o.jsxs(r.p,{children:["Event that is fired whenever the lasso changes. This is useful for controlling the state of this hook. If you want to react when the user has finished drawing the lasso use ",o.jsx(r.code,{children:"onChangeEnd"})," instead."]}),`
`,o.jsx(r.h4,{id:"onchangeend",children:o.jsx(r.code,{children:"onChangeEnd"})}),`
`,o.jsx(r.pre,{children:o.jsx(r.code,{className:"language-ts",children:`onChangeEnd?: (value: LassoValue) => void
`})}),`
`,o.jsx(r.p,{children:"Event that is fired when the user stops drawing the lasso. Use this event for selection purposes."}),`
`,o.jsx(r.h4,{id:"mindistancetocreatepoint",children:o.jsx(r.code,{children:"minDistanceToCreatePoint"})}),`
`,o.jsx(r.pre,{children:o.jsx(r.code,{className:"language-ts",children:`minDistanceToCreatePoint?: number
`})}),`
`,o.jsx(r.p,{children:"Amount of pixels that have to be dragged to create a new control point for the lasso."})]})}function Xe(e={}){const{wrapper:r}={...te(),...e.components};return r?o.jsx(r,{...e,children:o.jsx(re,{...e})}):re(e)}export{Xe as default};

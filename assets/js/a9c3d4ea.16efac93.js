"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[33],{7656:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>h,contentTitle:()=>d,default:()=>g,frontMatter:()=>u,metadata:()=>m,toc:()=>f});var r=n(4848),a=n(8453),i=n(6540),s=n(7058);function c(e){let t="";for(let n=0;n<e;n++)t+="ACDEFGHIKLMNPQRSTVWY"[Math.floor(20*Math.random())];return{name:"Random",sequence:t}}function l(e){switch(e){case"A":case"I":case"L":case"M":case"F":case"W":case"V":return"#80a0f0";case"K":case"R":return"#f01505";case"D":case"E":return"#c048c0";case"N":case"Q":case"S":case"T":return"#15c015";case"C":return"#f08080";case"G":return"#f09048";case"P":return"#c0c000";case"H":case"Y":return"#15a4a4";case"-":return"white";default:return"black"}}function o(){const e=600,[t,n]=i.useState(s.m4.I()),a=i.useRef(),{brush:o,setBrush:u}=(0,s.MX)(a,{direction:"x",defaultValue:{x1:0,x2:e,y1:0,y2:100}}),{data:d,xLength:m,yLength:h}=i.useMemo((()=>{const e=[c(1e3),c(1e3),c(1e3),c(1e3)],t=e.length;return{data:e,xLength:e[0].sequence.length,yLength:t}}),[]),f=(0,s.UI)({direction:"x",domain:[0,m],range:[0,e],transform:t}),x=(0,s.UI)({direction:"y",domain:[0,h],range:[0,400],transform:t}),g=f(1)-f(0),p=x(1)-x(0),{ref:v,invalidate:y}=function(e){const t=i.useRef(null),n=i.useRef(null),r=i.useRef(e);r.current=e,i.useEffect((()=>()=>{n.current&&(cancelAnimationFrame(n.current),n.current=null)}),[r]);const a=i.useCallback((()=>{n.current||(n.current=requestAnimationFrame((()=>{n.current=null,r.current(t.current.getContext("2d"))})))}),[]);return{ref:t,invalidate:a}}((e=>{e.fillStyle="gray",e.textAlign="center",e.textBaseline="middle",e.fillRect(0,0,v.current.width,v.current.height),e.fill();let t=(f.domain()[1]-f.domain()[0])/m*3;t=Math.floor((0,s.qE)(t,1,3));for(let n=0;n<h;n++){const r=d[n],a=x(n),i=x(n+1)-a;for(let n=Math.floor(f.domain()[0]);n<Math.ceil(f.domain()[1]);n+=t){const s=r.sequence[n],c=f(n),o=f(n+t),u=l(s);"white"!==u&&(e.fillStyle=u,e.fillRect(2*c,2*a,2*(o-c),2*i),g>14&&(e.fillStyle="black",e.font="40px monospace",e.fillText(s,2*c+g,2*a+p)))}}}));return(0,s.f4)(v,{direction:"x",value:t,zoomExtent:[1,10],onChange:e=>{n(e),u((t=>({...t,x1:(0,s.hF)(e,0),x2:(0,s.hF)(e,f.range()[1])})))}}),(0,s.x3)(v,{direction:"x",value:t,onChange:e=>{n(e),u((t=>({...t,x1:(0,s.hF)(e,0),x2:(0,s.hF)(e,f.range()[1])})))}}),i.useEffect((()=>{y()}),[d,f,x,x]),(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"auto max-content"},children:[(0,r.jsx)("div",{}),(0,r.jsx)("svg",{ref:a,style:{width:600,height:100},children:o?(0,r.jsx)(s.Nm,{clearOnMouse:!1,brush:o,onChange:e=>{u(e);const t=f.copy().domain([0,m]),r=t.invert(e.x1),a=t.invert(e.x2),i=m/(a-r),c=s.m4.I();s.m4.setTranslation(c,-r,0,0),s.m4.setScaling(c,i,1,1),n(c)},parent:a,direction:"x"}):null}),(0,r.jsx)("div",{children:Array.from({length:h}).map(((e,t)=>(0,r.jsx)("div",{style:{textAlign:"right",paddingRight:"10px",lineHeight:3,fontSize:p/3},children:d[t].name},t)))}),(0,r.jsx)("canvas",{ref:v,width:1200,height:800,style:{width:e,height:400}})]})}const u={title:"Sequence Alignment Viewer"},d=void 0,m={id:"demo/msa",title:"Sequence Alignment Viewer",description:"Demo",source:"@site/docs/demo/msa.mdx",sourceDirName:"demo",slug:"/demo/msa",permalink:"/hyprvis/demo/msa",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{title:"Sequence Alignment Viewer"},sidebar:"tutorialSidebar",previous:{title:"canvasRendering",permalink:"/hyprvis/demo/canvasRendering"},next:{title:"syncedBrush",permalink:"/hyprvis/demo/syncedBrush"}},h={},f=[{value:"Demo",id:"demo",level:2}];function x(e){const t={h2:"h2",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h2,{id:"demo",children:"Demo"}),"\n",(0,r.jsx)(o,{})]})}function g(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(x,{...e})}):x(e)}}}]);
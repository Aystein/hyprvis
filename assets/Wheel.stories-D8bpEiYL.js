import{j as s}from"./jsx-runtime-DRTy3Uxn.js";import{r as c}from"./index-BBkUAzwr.js";import{u as M}from"./useUncontrolled-Bi52Fxjv.js";const D=0,P=1,R=2,h=40,f=800;function X(e){let t=0,n=0,r=0,o=0;switch(r=e.deltaX,o=e.deltaY,e.deltaMode){case D:break;case P:r*=h,o*=h;break;case R:r*=f,o*=f;break}return r&&!t&&(t=r<1?-1:1),o&&!n&&(n=o<1?-1:1),{spinX:t,spinY:n,pixelX:r,pixelY:o,x:e.clientX,y:e.clientY}}function Y(e,t){const n=c.useRef(t);n.current=t,c.useEffect(()=>{const r=e.current;if(!r)return;const o=l=>{l.preventDefault();const i=r.getBoundingClientRect();n.current({...X(l),x:l.clientX-i.left,y:l.clientY-i.top})};return r.addEventListener("wheel",o,{passive:!1}),()=>{r.removeEventListener("wheel",o)}},[e])}function p(e,t){return(t-e.x)/e.k}function k(e,t){return(t-e.y)/e.k}function _(e,t,n){return{x:e.x+t*e.k,y:e.y+n*e.k,k:e.k}}function L(e,t,n){const r=p(e,0),o=p(e,t)-t,l=k(e,0),i=k(e,n)-n;return _(e,o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),i>l?(l+i)/2:Math.min(0,l)||Math.max(0,i))}function S(e,t,n,r){const o=Math.exp(r*.1),l=Math.max(1,o*e.k),i=(t-e.x)/e.k,E=(n-e.y)/e.k,W=-(i*(l-e.k)),w=-(E*(l-e.k)),u=e.x+W,x=e.y+w;return{k:l,x:Math.abs(u)>.1?u:0,y:Math.abs(x)>.1?x:0}}function C(e,t={}){const[n,r]=M({value:t.value,defaultValue:t.defaultValue||{x:0,y:0,k:1},onChange:t.onChange});return Y(e,o=>{let l=S(n,o.x,o.y,-o.spinY);if(t.constraint)l=t.constraint(l);else{const i=e.current.getBoundingClientRect();l=L(l,i.width,i.height)}r(l)}),{zoom:n,setZoom:r}}const G={};function I(){const e=c.useRef(null),{zoom:t}=C(e,{});return s.jsx(s.Fragment,{children:s.jsx("div",{ref:e,style:{position:"relative",width:300,height:300,overflow:"hidden",border:"1px dashed black"},children:s.jsx("div",{style:{width:150,height:150,left:75*t.k,top:75*t.k,position:"absolute",border:"1px solid black",transform:`translate(${t.x}px, ${t.y}px) scale(${t.k})`,transformOrigin:"0 0",display:"flex",justifyContent:"center",alignItems:"center"},children:s.jsxs("div",{style:{display:"flex",flexDirection:"column",userSelect:"none"},children:[s.jsxs("div",{children:["k: ",t.k.toPrecision(2)]}),s.jsxs("div",{children:["x: ",t.x.toPrecision(2)]}),s.jsxs("div",{children:["y: ",t.y.toPrecision(2)]})]})})})})}function O(){const e=c.useRef(null),[t,n]=c.useState({k:1,x:0,y:0});return C(e,{value:t,onChange:n}),s.jsxs(s.Fragment,{children:[s.jsx("div",{ref:e,style:{position:"relative",width:300,height:300,overflow:"hidden",border:"1px dashed black"},children:s.jsx("div",{style:{width:150,height:150,left:75*t.k,top:75*t.k,position:"absolute",border:"1px solid black",transform:`translate(${t.x}px, ${t.y}px) scale(${t.k})`,transformOrigin:"0 0",display:"flex",justifyContent:"center",alignItems:"center"},children:s.jsxs("div",{style:{display:"flex",flexDirection:"column",userSelect:"none"},children:[s.jsxs("div",{children:["k: ",t.k.toPrecision(2)]}),s.jsxs("div",{children:["x: ",t.x.toPrecision(2)]}),s.jsxs("div",{children:["y: ",t.y.toPrecision(2)]})]})})}),s.jsx("button",{onClick:()=>n({k:1,x:0,y:0}),children:"Reset"}),s.jsx("button",{onClick:()=>n({k:t.k,x:t.x+50,y:t.y}),children:"Move right"})]})}const a={name:"Wheel",render:()=>s.jsx(I,{})},d={name:"Wheel Controlled",render:()=>s.jsx(O,{})};var y,m,j;a.parameters={...a.parameters,docs:{...(y=a.parameters)==null?void 0:y.docs,source:{originalSource:`{
  name: "Wheel",
  render: () => <WheelStory />
}`,...(j=(m=a.parameters)==null?void 0:m.docs)==null?void 0:j.source}}};var g,v,b;d.parameters={...d.parameters,docs:{...(g=d.parameters)==null?void 0:g.docs,source:{originalSource:`{
  name: "Wheel Controlled",
  render: () => <ControlledWheelDemo />
}`,...(b=(v=d.parameters)==null?void 0:v.docs)==null?void 0:b.source}}};const H=["Wheel","ControlledWheel"];export{d as ControlledWheel,a as Wheel,H as __namedExportsOrder,G as default};
